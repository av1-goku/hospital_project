{% extends 'hospital/base.html' %}

{% block title %}Bill #{{ bill.bid }}{% endblock %}

{% block content %}
<div class="row justify-content-center no-print mb-3">
    <div class="col-md-8 text-end">
        <button onclick="window.print()" class="btn btn-primary">
            <i class="fas fa-print"></i> Print Bill
        </button>
        <a href="{% url 'bill_list' %}" class="btn btn-secondary">
            <i class="fas fa-arrow-left"></i> Back to List
        </a>
    </div>
</div>

<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card">
            <div class="card-body p-5">
                <!-- Bill Header -->
                <div class="text-center mb-4">
                    <h2><i class="fas fa-hospital"></i> Hospital Management System</h2>
                    <p class="text-muted">Professional Healthcare Services</p>
                    <hr>
                </div>

                <!-- Bill Info -->
                <div class="row mb-4">
                    <div class="col-6">
                        <h5>Bill To:</h5>
                        <strong>{{ bill.patient.patient_name }}</strong><br>
                        {{ bill.patient.address }}<br>
                        Mobile: {{ bill.contact_number }}<br>
                        Email: {{ bill.patient.email }}
                    </div>
                    <div class="col-6 text-end">
                        <h5>Bill Details:</h5>
                        Bill #: <strong>{{ bill.bid }}</strong><br>
                        Date: {{ bill.bill_date|date:"F d, Y" }}<br>
                        Status: <span class="badge bg-{{ bill.payment_status }}">{{ bill.get_payment_status_display
                            }}</span>
                    </div>
                </div>

                <!-- Services Table -->
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>Description</th>
                            <th width="150" class="text-end">Amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <strong>Consultation & Treatment</strong><br>
                                Doctor: {{ bill.consult_doctor.doctor_name }}<br>
                                Diagnosis: {{ bill.diagnosis }}
                            </td>
                            <td class="text-end">₹{{ bill.amount }}</td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr>
                            <th class="text-end">Subtotal:</th>
                            <td class="text-end">₹{{ bill.amount }}</td>
                        </tr>
                        <tr>
                            <th class="text-end">Tax (18% GST):</th>
                            <td class="text-end">₹{{ bill.tax_amount|floatformat:2 }}</td>
                        </tr>
                        <tr class="table-primary">
                            <th class="text-end">
                                <h5>Total Amount:</h5>
                            </th>
                            <td class="text-end">
                                <h5>₹{{ bill.total_amount|floatformat:2 }}</h5>
                            </td>
                        </tr>
                    </tfoot>
                </table>

                <!-- Payment Info -->
                <div class="row mt-4">
                    <div class="col-6">
                        <strong>Payment Method:</strong> {{ bill.get_payment_method_display|default:"Not specified" }}
                    </div>
                    <div class="col-6 text-end">
                        <strong>Generated By:</strong> {{ bill.created_by.get_full_name|default:bill.created_by.username
                        }}
                    </div>
                </div>

                <div class="text-center mt-5">
                    <p class="text-muted"><small>Thank you for choosing our hospital. Get well soon!</small></p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}